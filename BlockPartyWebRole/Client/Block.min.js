var BlockState,BlockType,Block;(function(n){n._map=[],n._map[0]="Empty",n.Empty=0,n._map[1]="Idle",n.Idle=1,n._map[2]="SlidingLeft",n.SlidingLeft=2,n._map[3]="SlidingRight",n.SlidingRight=3,n._map[4]="WaitingToFall",n.WaitingToFall=4,n._map[5]="Falling",n.Falling=5,n._map[6]="Matched",n.Matched=6,n._map[7]="Flashing",n.Flashing=7,n._map[8]="WaitingToPop",n.WaitingToPop=8,n._map[9]="Popping",n.Popping=9,n._map[10]="WaitingToEmpty",n.WaitingToEmpty=10})(BlockState||(BlockState={})),function(n){n._map=[],n._map[0]="A",n.A=0,n._map[1]="B",n.B=1,n._map[2]="C",n.C=2,n._map[3]="D",n.D=3,n._map[4]="E",n.E=4,n._map[5]="F",n.F=5}(BlockType||(BlockType={})),Block=function(){function n(){this.FallTimer=0,this.PopDelayDuration=0,this.EmptyDelayDuration=0,this.FALL_DELAY_DURATION=250,this.FLASH_DURATION=1e3,this.POP_DURATION=250,this.fallDelayTimer=0,this.flashTimer=0,this.popDelayTimer=0,this.popTimer=0,this.emptyDelayTimer=0}return n.TYPE_COUNT=6,n.WIDTH=10,n.HEIGHT=10,n.FALL_DURATION=50,n.POP_DELAY_INTERVAL=250,n.EMPTY_DELAY_INTERVAL=250,n.prototype.Update=function(n){switch(this.State){case BlockState.WaitingToFall:this.fallDelayTimer+=n,this.fallDelayTimer>=this.FALL_DELAY_DURATION&&(this.fallDelayTimer=0,this.State=BlockState.Falling);break;case BlockState.Flashing:this.flashTimer+=n,this.flashTimer>=this.FLASH_DURATION&&(this.flashTimer=0,this.State=BlockState.WaitingToPop);break;case BlockState.WaitingToPop:this.popDelayTimer+=n,this.popDelayTimer>=this.PopDelayDuration&&(this.popDelayTimer=0,this.PopDelayDuration=0,this.State=BlockState.Popping);break;case BlockState.Popping:this.popTimer+=n,this.popTimer>=this.POP_DURATION&&(this.popTimer=0,this.State=BlockState.WaitingToEmpty);break;case BlockState.WaitingToEmpty:this.emptyDelayTimer+=n,this.emptyDelayTimer>=this.EmptyDelayDuration&&(this.emptyDelayTimer=0,this.EmptyDelayDuration=0,this.State=BlockState.Empty)}},n}()